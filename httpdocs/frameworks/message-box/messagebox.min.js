/***********************************************************************************************************************
MessageBox - A jQuery Plugin to replace Javascript's window.alert(), window.confirm() and window.prompt() functions
    Author          : Gaspare Sganga
    Version         : 2.1.0
    License         : MIT
    Documentation   : http://gasparesganga.com/labs/jquery-message-box/
***********************************************************************************************************************/
!function(a,b){function i(){!e&&g.length&&j(g.shift())}function j(c){var f=c.settings;e=c;var g=a("<div>",{"class":"messagebox_overlay"}).css(d.overlay).appendTo("body"),i=a("<div>",{"class":"messagebox_spacer"}).css(d.spacer).appendTo(g),j=a("<div>",{"class":"messagebox"}).addClass(f.customClass).css(d.messagebox).data("instance",c).appendTo(g);f.width&&j.outerWidth(f.width);var l=a("<div>",{"class":"messagebox_content",html:f.message}).css(d.content).appendTo(j);if(f.input!==!1&&f.input!==b&&null!==f.input){var n=a("<div>",{"class":"messagebox_content_inputs",css:d.boxSizing}).appendTo(l);m(f.input).appendTo(n).first().trigger("focus")}var o=a("<div>",{"class":"messagebox_buttons"}).css(d.buttons).appendTo(j);if(f.buttonDone){var p=a([]);"string"==typeof f.buttonDone?p=p.add(k("messagebox_button_done",h.buttonDoneName,{text:f.buttonDone,keyCode:h.keyCodeDone},c)):a.each(f.buttonDone,function(a,b){p=p.add(k("messagebox_button_done",a,b,c))}),p.appendTo(o)}if(f.buttonFail){var p=a([]);"string"==typeof f.buttonFail?p=p.add(k("messagebox_button_fail",h.buttonFailName,{text:f.buttonFail,keyCode:h.keyCodeFail},c)):a.each(f.buttonFail,function(a,b){p=p.add(k("messagebox_button_fail",a,b,c))}),0===a.trim(f.buttonsOrder).toLowerCase().indexOf("d")?p.appendTo(o):p.prependTo(o)}var r=0,s=0-j.outerHeight()-h.topBuffer;"auto"==a.trim(f.top).toLowerCase()?(g.css("justify-content","center"),s-=a(window).height()):(g.css("justify-content","flex-start"),r=f.top,"%"==a.trim(f.top).toLowerCase().slice(-1)?j.css("max-height",100-parseInt(f.top,10)*h.maxHeightCoefficient+"%"):j.data("fRefreshMaxHeight",!0)),i.data("spacerTopMargin",s).css({height:0,"margin-top":s}).animate({height:r,"margin-top":0},f.speed,function(){q(j,a(window).height())})}function k(b,c,e,f){"string"==typeof e&&(e={text:e});var g=a("<button>",{"class":b,text:e.text||""}).addClass(e["class"]).css(d.boxSizing).on("click",{name:c},s);return a.each(l(e.keyCode),function(a,b){f.keyCodes[b]=g}),g}function l(c){("number"==typeof c||"string"==typeof c)&&(c=[c]);var d=[];return a.isArray(c)&&(d=a.map(c,function(a){return parseInt(a,10)||b})),d}function m(c){if(c===!0||"string"==typeof c)return o(a("<input>",{value:c===!0?"":c,type:"text"}));if(a.isArray(c)){var e=a([]);return a.each(c,function(b,c){e=e.add(o(a("<input>",{value:c,type:"text"})))}),e}if(a.isPlainObject(c)){var e=a([]);return a.each(c,function(c,f){var g=n(c,f);if(f.label!==b){var h=a("<label>",{"class":"messagebox_content_label",css:d.boxSizing,text:f.label});g.appendTo(h),e=e.add(h)}else e=e.add(g)}),e}return a(c)}function n(b,c){var d=a.trim(c.type).toLowerCase();switch(d){case"select":var e=o(a("<select>"),b,c),f=a.isArray(c.options)?c.options.reduce(function(a,b){return a[b]=b,a},{}):c.options;f||(r('No options provided for "'+b+'"'),f={"":"&nbsp;"});var g=!1;return a.each(f,function(b,d){var f=a("<option>",{value:b,html:d}).appendTo(e);c["default"]==b&&(f.prop("selected",!0),g=!0)}),g||(a("<option>",{value:"",text:c.title}).prop({disabled:!0,selected:!0,hidden:!0}).prependTo(e),e.find("option").css("color",e.css("color")),e.addClass("messagebox_content_input_selectplaceholder").prop("selectedIndex",0).one("change",function(){e.find("option").css("color",""),e.removeClass("messagebox_content_input_selectplaceholder")})),e;case"text":case"password":default:return o(a("<input>",{type:"password"==d?"password":"text",maxlength:c.maxlength,placeholder:c.title,value:c["default"]}),b,c)}}function o(a,b,c){return c=c||{},a.addClass("messagebox_content_input").css(d.boxSizing).attr({name:b,title:c.title})}function p(c){var d=[],e=[];if(c.find(".messagebox_content_inputs").find("input, select").each(function(){var b=a(this);d.push(b.attr("name")),e.push(b.val())}),!e.length)return b;var f={},g=!1;return a.each(d,function(a,c){return c===b?(g=!0,!1):void(f[c]=e[a])}),g&&1==e.length?e[0]:g?e:f}function q(a,b){a.data("fRefreshMaxHeight")&&a.css("max-height",b-a.offset().top*h.maxHeightCoefficient)}function r(a){a="jQuery MessageBox Warning: "+a,window.console.warn?console.warn(a):window.console.log&&console.log(a)}function s(c){var d=a(c.currentTarget),g=d.closest(".messagebox"),h=g.closest(".messagebox_overlay"),j=h.children(".messagebox_spacer").first(),k=g.data("instance"),l=p(g);j.animate({height:0,"margin-top":j.data("spacerTopMargin")},k.settings.speed,function(){h.remove(),d.hasClass("messagebox_button_done")?k.deferred.resolve(l,c.data.name):k.deferred.reject(l,c.data.name),f.length?e=f.pop():(e=b,i())})}function t(b){if(e){var c=a(b.currentTarget).width(),d=a(b.currentTarget).height();a(document).find(".messagebox").each(function(){var b=a(this);b.css("min-width",b.outerWidth()>c?c:""),q(b,d)})}}function u(a){if(e){var b=e.keyCodes[a.which];b&&b.trigger("click")}}var c={buttonDone:"OK",buttonFail:b,buttonsOrder:"done fail",customClass:"",input:!1,message:"",queue:!0,speed:200,top:"25%",width:"auto"},d={overlay:{"box-sizing":"border-box",display:"flex","flex-flow":"column nowrap","align-items":"center",position:"fixed",top:"0",left:"0",width:"100%",height:"100%"},spacer:{"box-sizing":"border-box",flex:"0 1 auto"},messagebox:{"box-sizing":"border-box",flex:"0 1 auto",display:"flex","flex-flow":"column nowrap"},content:{"box-sizing":"border-box",flex:"0 1 auto","overflow-y":"auto"},buttons:{"box-sizing":"border-box",flex:"0 0 auto"},boxSizing:{"box-sizing":"border-box"}},e=b,f=[],g=[],h={buttonDoneName:"buttonDone",buttonFailName:"buttonFail",keyCodeDone:[13],keyCodeFail:[27],maxHeightCoefficient:1.5,topBuffer:100};a.MessageBoxSetup=function(b){a.extend(!0,c,b)},a.MessageBox=function(b){a.isPlainObject(b)||(b={message:b});var d=a.Deferred(),h=a.extend(!0,{},c,b);h.top=a.trim(h.top).toLowerCase(),a(document.activeElement).trigger("blur");var k={deferred:d,keyCodes:{},settings:h};return h.queue?(g.push(k),i()):(e&&f.push(e),j(k)),d.promise()},a(function(){a(window).on("resize",t).on("keydown",u)})}(jQuery);